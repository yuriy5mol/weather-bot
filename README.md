# üå§Ô∏è Weather Bot (Aiogram + OpenWeather)

![Python](https://img.shields.io/badge/Python-3.10%2B-blue)
![Aiogram](https://img.shields.io/badge/Aiogram-3.x-blueviolet)
![OpenWeather](https://img.shields.io/badge/API-OpenWeatherMap-orange)

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–≥–æ–¥—ã, –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –∏ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–∑–¥—É—Ö–∞. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã –≤ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö.

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **üå°Ô∏è –¢–µ–∫—É—â–∞—è –ø–æ–≥–æ–¥–∞**: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏.
*   **üìÖ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π**: –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–æ—á–∞—Å–æ–≤–æ–π –ø—Ä–æ–≥–Ω–æ–∑ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ –¥–Ω—è–º.
*   **üí® –ö–∞—á–µ—Å—Ç–≤–æ –≤–æ–∑–¥—É—Ö–∞ (AQI)**: –ê–Ω–∞–ª–∏–∑ –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è –≤–æ–∑–¥—É—Ö–∞ (SO‚ÇÇ, NO‚ÇÇ, PM2.5, PM10, O‚ÇÉ, CO) —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ ("–•–æ—Ä–æ—à–æ", "–ü–ª–æ—Ö–æ" –∏ —Ç.–¥.).
*   **‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤**: –¢–∞–±–ª–∏—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –∏ –≤–µ—Ç—Ä–∞ –≤ –¥–≤—É—Ö –≥–æ—Ä–æ–¥–∞—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
*   **üîî –£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**:
    *   –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–æ—Ä–æ–¥–∞ –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–µ 2 —á–∞—Å–∞ –∏–ª–∏ —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏).
    *   –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –Ω–∞ –±–∞–∑–µ `APScheduler`.
*   **üîç Inline-—Ä–µ–∂–∏–º**: –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ–≥–æ–¥—ã –≤ –ª—é–±–æ–º —á–∞—Ç–µ —á–µ—Ä–µ–∑ `@botname city`.
*   **üíæ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£–º–Ω—ã–π –∫—ç—à –∑–∞–ø—Ä–æ—Å–æ–≤ (10 –º–∏–Ω—É—Ç) –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ª–∏–º–∏—Ç–æ–≤ API –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ê–≤—Ç–æ—Ä—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `MVP+`:

```text
weather_bot/
‚îú‚îÄ‚îÄ .cache/             # üìÇ –ö—ç—à JSON-–æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç API (–∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞)
‚îú‚îÄ‚îÄ bot.py              # ü§ñ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ (handlers, schedule)
‚îú‚îÄ‚îÄ weather_app.py      # üåê –ö–ª–∏–µ–Ω—Ç API OpenWeather (–ª–æ–≥–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤)
‚îú‚îÄ‚îÄ storage.py          # üíæ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫—ç—à–µ–º
‚îú‚îÄ‚îÄ user_data.json      # üë§ –ë–î –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (JSON)
‚îú‚îÄ‚îÄ requirements.txt    # üì¶ –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ .env.example        # üîë –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md           # üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
```bash
git clone <repository_url>
cd weather_bot
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```powershell
python -m venv .venv
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows):
.venv\Scripts\Activate.ps1
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Linux/macOS):
source .venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ `.env.example`) –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–ª—é—á–∏:
```ini
OW_API_KEY=–≤–∞—à_–∫–ª—é—á_–æ—Ç_OpenWeatherMap
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_BotFather
```

### 5. –ó–∞–ø—É—Å–∫
```bash
python bot.py
```

---

## ü§ñ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ / –ö–Ω–æ–ø–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- |
| `/start` | –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ –≤—ã–∑–æ–≤ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é |
| **üìç –ü–æ–≥–æ–¥–∞ {–ì–æ—Ä–æ–¥}** | –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–≥–æ–¥—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ –º–µ—Å—Ç–∞ |
| **üå§ –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é** | –í–≤–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏—è –≥–æ—Ä–æ–¥–∞ –≤—Ä—É—á–Ω—É—é |
| **üß≠ –ü–æ–∏—Å–∫ –ø–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏** | –ó–∞–ø—Ä–æ—Å —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è (Send Location) |
| **üèõ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤** | –í–≤–æ–¥ –¥–≤—É—Ö –≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è |
| **üîî –ü–æ–≥–æ–¥–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** | –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏ –ø–æ–≥–æ–¥—ã |

*–í–Ω—É—Ç—Ä–∏ –º–µ–Ω—é –ø–æ–≥–æ–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:*
*   **üìÖ –ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ 5 –¥–Ω–µ–π** ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–æ—á–∞—Å–æ–≤–æ–π –ø—Ä–æ–≥–Ω–æ–∑.
*   **üìä –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** ‚Äî –∞–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–∑–¥—É—Ö–∞ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏.

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **–Ø–∑—ã–∫**: Python 3.10+
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫**: [`aiogram 3.x`](https://docs.aiogram.dev/) ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏ –±—ã—Å—Ç—Ä—ã–π.
*   **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫**: [`APScheduler`](https://apscheduler.readthedocs.io/) ‚Äî –Ω–∞–¥–µ–∂–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á.
*   **API**: [`OpenWeatherMap`](https://openweathermap.org/api) (Current, Forecast 5 Day, Air Pollution, Geocoding).
*   **–•—Ä–∞–Ω–µ–Ω–∏–µ**: JSON (—Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞) ‚Äî –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å.

